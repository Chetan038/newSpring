import { Component, OnInit } from '@angular/core';
import { ActivatedRoute, Router } from '@angular/router';
import { EmployeeService } from '../services/employee.service';
import { FormBuilder, FormGroup } from '@angular/forms';

@Component({
  selector: 'app-edit-employee',
  templateUrl: './edit-employee.component.html',
  styleUrls: ['./edit-employee.component.css']
})
export class EditEmployeeComponent implements OnInit {
  editEmployeeForm!: FormGroup;
  departments = ['HR', 'Finance', 'Engineering', 'Sales']; // Sample departments
  employeeId!: number;

  constructor(
    private route: ActivatedRoute,
    private router: Router,
    private employeeService: EmployeeService,
    private fb: FormBuilder
  ) {}

  ngOnInit(): void {
    this.employeeId = +this.route.snapshot.paramMap.get('id')!;
    this.editEmployeeForm = this.fb.group({
      name: [''],
      email: [''],
      department: ['']
    });

    this.loadEmployee();
  }

  loadEmployee() {
    this.employeeService.getEmployeeById(this.employeeId).subscribe((data) => {
      this.editEmployeeForm.patchValue({
        name: data.name,
        email: data.email,
        department: data.department
      });
    });
  }

  updateEmployee() {
    this.employeeService.updateEmployee(this.employeeId, this.editEmployeeForm.value).subscribe(() => {
      alert('Employee updated successfully');
      this.router.navigate(['/employees']); // Redirect to employee list
    });
  }
}


@@@


<h2>Edit Employee</h2>
<form [formGroup]="editEmployeeForm" (ngSubmit)="updateEmployee()">
  <label>Name:</label>
  <input type="text" formControlName="name" required /><br />

  <label>Email:</label>
  <input type="email" formControlName="email" required /><br />

  <label>Department:</label>
  <select formControlName="department">
    <option *ngFor="let dept of departments" [value]="dept">{{ dept }}</option>
  </select><br />

  <button type="submit">Update</button>
</form>


@@@

import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';

@Injectable({
  providedIn: 'root'
})
export class EmployeeService {
  private apiUrl = 'http://localhost:8080/employees'; // Update with actual backend API URL

  constructor(private http: HttpClient) {}

  getEmployeeById(id: number): Observable<any> {
    return this.http.get(`${this.apiUrl}/${id}`);
  }

  updateEmployee(id: number, employeeData: any): Observable<any> {
    return this.http.put(`${this.apiUrl}/${id}`, employeeData);
  }
}
@@

